<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TA1GRH POTA Aktiviteleri</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 14px;
      padding: 10px;
    }
    .park {
      margin-bottom: 10px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 5px;
    }
  </style>
</head>
<body>
  <h3>TA1GRH POTA Aktiviteleri</h3>
  <div id="parks">Yükleniyor...</div>

  <script>
    async function fetchPOTA() {
      try {
        const response = await fetch("https://api.pota.app/spot/activator/TA1GRH");
        const data = await response.json();
        const parks = data.spots || [];
        const container = document.getElementById("parks");
        container.innerHTML = "";

        const uniqueParks = {};

        parks.forEach(spot => {
          const park = spot.reference;
          if (!uniqueParks[park]) {
            uniqueParks[park] = spot;
          }
        });

        Object.values(uniqueParks).slice(0, 10).forEach(spot => {
          const div = document.createElement("div");
          div.className = "park";
          div.innerHTML = `<strong>${spot.reference}</strong> - ${spot.parkName} <br> ${new Date(spot.time).toLocaleString()}`;
          container.appendChild(div);
        });

        if (Object.keys(uniqueParks).length === 0) {
          container.innerHTML = "Aktif park bulunamadı.";
        }
      } catch (e) {
        document.getElementById("parks").innerText = "Veri alınamadı.";
        console.error(e);
      }
    }

    fetchPOTA();
  </script>
</body>
</html>
